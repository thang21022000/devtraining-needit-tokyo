<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Submit a request.">94d2e64997b9e5104313b066f053af75</compiled_topic>
        <design_definition>{"type":"FlowTopic","type":"FlowTopic","triggers":[{"type":"Trigger","name":"08e85ba5763846bd9eec696512ed192d","triggerType":"request","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"id":"08e85ba5763846bd9eec696512ed192d"}],"goals":[{"name":"primary","trigger_id":"08e85ba5763846bd9eec696512ed192d","nodes":[{"type":"StartGoal","type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","type":"String","mode":"string","value":""},"id":"62e80f5d747742d1a7b6551610b12c78","name":"Start","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"TerminateGoal","type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","type":"String","mode":"string","value":""},"id":"dc1190333bf444fdaa4c27256fd46aac","name":"End","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"Search Catalog Item","library_topic_id":"ccaacd71c3a3330012d1758a7ff57ecd","parameter-mappings":[{"parameter-name":"catalogs","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    function getCatalogM2M(portalId) {\n        var gr = new GlideRecord('m2m_sp_portal_catalog');\n        if (gr.isValid()) {\n            gr.addActiveQuery();\n            gr.addQuery('sp_portal', portalId);\n            gr.addQuery('sc_catalog.active', true);\n            gr.orderBy('order');\n            gr.orderBy('sc_catalog.active');\n        }\n        else {\n            gr = new GlideRecord('sp_portal');\n            gr.addQuery('sys_id', portalId);\n        }\n        gr.setWorkflow(false)\n        gr.query();\n        return gr;\n    }\n    var suffix = vaVars.portalName;\n    if (suffix) {\n        var catalogs = \"\";\n        var gr = new GlideRecord('sp_portal');\n        gr.addQuery('url_suffix', suffix);\n        gr.setWorkflow(false)\n        gr.query();\n        gr.next();\n        var portalId = gr.getUniqueValue();\n        vaVars.portalId = portalId;\n        var m2mGR = getCatalogM2M(portalId);\n        if (m2mGR.getRowCount() &gt; 0) {\n            m2mGR.next();\n            catalogs += m2mGR.getValue('sc_catalog');\n            while (m2mGR.next()) {\n                catalogs += ',';\n                catalogs += m2mGR.getValue('sc_catalog')\n\n            }\n        }\n        return catalogs;\n    }\n    return '';\n})()\n"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"query_term","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    if (vaVars.search_catalogitem != '' &amp;&amp; !vaVars.search_again)\n        return vaVars.search_catalogitem\n\n    if (vaVars.search_hardware != '')\n        return vaVars.search_hardware\n    else if (vaVars.search_software != '')\n        return vaVars.search_software\n    else if (vaInputs.search != '')\n        return vaInputs.search\n\n})()\n"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"result_limit","value":{"type":"String","type":"String","mode":"string","value":"5"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}}],"return-value-mappings":[{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"catalog_item_id","main_topic_mapped_variable_name":"catalog_item_id"},{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"item_type","main_topic_mapped_variable_name":"item_type"},{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"is_conversational","main_topic_mapped_variable_name":"is_conversational"}],"id":"32e579a972404e2e8b68ec6e5951cbd5","name":"Search Catalog Item","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.search_again || !vaVars.catalog_item_id;\n})()\n"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Didn't recieve an itemID","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id == '' || vaVars.catalog_item_id == null;\n})()\n"},"id":"15a649a66f6340a3a5b902563ca4d5b7","name":"Didn't recieve an itemID"},{"type":"Branch","type":"Branch","label":"Recieved an ItemID","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   \n   return (vaVars.catalog_item_id != null &amp;&amp; vaInputs.catalog_item_id != \"-1\");\n   \n})()\n"},"id":"d3d454df4568491595392026e355d7a4","name":"Recieved an ItemID"},{"type":"Branch","type":"Branch","label":"itemIid is -1","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id == \"-1\";\n})()\n"},"id":"d597970780bb462cb0186354f5bc7b3a","name":"itemIid is -1"}],"id":"5227c860c92b4eae82d46843d06473d0","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"OK, let's try again.\", vaContext.getRequesterLang())"}],"id":"66efd2591b864036aba670c32d3f2f8c","name":"Try Again","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Not Supported","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   \n        return (!vaVars.is_conversational || !vaInputs.is_conversational);\n\n})()\n"},"id":"2e3d948a051b408d843dd9c9e07a004c","name":"Not Supported"},{"type":"Branch","type":"Branch","label":"Is Supported","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return (vaVars.is_conversational || vaInputs.is_conversational);\n})()\n"},"id":"50494135ea9e46b6ac06fc2546d17ee0","name":"Is Supported"}],"id":"add420b9e74b4a8ead5a4a8e66e16d43","goal_id":"primary"},{"type":"LinkOutputPrompt","type":"LinkOutputPrompt","header":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Use the link below to submit your request:\", vaContext.getRequesterLang())"},"label":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var item = new sn_sc.CatItem(vaInputs.catalog_item_id);\n    if (item) {\n        var catItemJson = item.read({\n            'name' : ''\n        }, false);\n        return catItemJson.name || '';\n    }\n    return '';\n})()\n"},"url":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var item = new sn_sc.CatItem(vaInputs.catalog_item_id);\n\n    if (item &amp;&amp; item.getRecordClass() === \"sc_cat_item_guide\")\n        return vaVars.baseUri + vaVars.portalName + '?id=sc_cat_item_guide&amp;sys_id=' + vaInputs.catalog_item_id + '&amp;referrer=va';\n    \n    return vaVars.baseUri + vaVars.portalName + '?id=sc_cat_item&amp;sys_id=' + vaInputs.catalog_item_id + '&amp;referrer=va';\n})()"},"link_type":"single","multi_link_script":"","id":"229e81ade53643039476a8c81cef1209","name":"Link Output","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaInputs.catalog_item_id != '-1';\n})()\n"}},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"Request Catalog Item","library_topic_id":"a39acd71c3a3330012d1758a7ff57eb6","parameter-mappings":[{"parameter-name":"catalog_item_id","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n\n    if (vaVars.catalog_item_id == '') {\n        return vaInputs.catalog_item_id.toString()\n    }\n\n    else\n        return vaVars.catalog_item_id.toString();\n\n})()\n"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"execute_contextual_search","value":{"type":"String","type":"String","mode":"string","value":"false"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"confirm_catalog_item","value":{"type":"String","type":"String","mode":"string","value":"true"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"show_end_state_card","value":{"type":"String","type":"String","mode":"string","value":"false"},"metadata":{"type":"True/False","list":false,"items":[],"use_items":false}}],"return-value-mappings":[{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"record_id","main_topic_mapped_variable_name":"record_id"},{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"record_table","main_topic_mapped_variable_name":"record_table"},{"main_topic_variable_namespace":"vaInputs","library_topic_return_parameter_name":"variables","main_topic_mapped_variable_name":"variables"}],"id":"6d6247b7375b4fbb9650a1a71cf954e8","name":"Request Catalog Item","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Catalog Request Not Complete","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"record_idEMPTYSTRING"},"id":"2604a816cf244e54a0a6ca0c789c7742","name":"Catalog Request Not Complete"},{"type":"Branch","type":"Branch","label":"Item has no VA Support","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !!vaInputs.record_id.getValue() &amp;&amp; vaInputs.record_id.getValue() == '-1';\n})()\n"},"id":"40eef31553584531be2795cc263fbe99","name":"Item has no VA Support"},{"type":"Branch","type":"Branch","label":"Catalog Request Complete","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !!vaInputs.record_id.getValue() &amp;&amp; vaInputs.record_id.getValue() != '-1';\n})()\n"},"id":"059b91cf63f442298b78e2801443f72f","name":"Catalog Request Complete"}],"id":"03db716ef2a14c57ac848341fe5c81c7","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Your request has been submitted. Here are the details:\", vaContext.getRequesterLang())"}],"id":"41c355befd7d498989a56e6ac013a85f","name":"Request Complete Message","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"search_again=1"},"id":"33e1bdc52b494c1e8138d9acfd187218","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"search_again=0"},"id":"7701dbf8077e404c8145b2c8e383d147","name":"Yes"}],"id":"078faf38452e4e3ba9a3c447c9caed31","goal_id":"primary"},{"type":"ChoiceInputPrompt","type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"ca244565157e4298ac712f52e089a787","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n       return !vaVars.query_search;\n})()\n"},"variable_id":"45e06ec7056d406d866244385bee84b8","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to keep searching?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":true,"use_confirmation_prompt":false}},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"I couldn't find any item that matches your search query\", vaContext.getRequesterLang())"}],"id":"07f218d947e046288a25b452afceed7a","name":"Item not found","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"Deflection","library_topic_id":"7fb4ca055303201033cdddeeff7b12b3","parameter-mappings":[{"parameter-name":"deflection_configuration","value":{"type":"String","type":"String","mode":"string","value":"5292005253213010000dddeeff7b126c"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_configuration"}},{"parameter-name":"deflection_pattern","value":{"type":"String","type":"String","mode":"string","value":"9ee3409253213010000dddeeff7b123b"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_pattern"}},{"parameter-name":"activity_table","value":{"type":"String","type":"String","mode":"string","value":""},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"activity_ids","value":{"type":"String","type":"String","mode":"string","value":""},"metadata":{"type":"String","list":false,"items":[],"use_items":false}}],"return-value-mappings":[],"id":"988ce53412964540b4fc06ed44706c4b","name":"No Deflection","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"Deflection","library_topic_id":"7fb4ca055303201033cdddeeff7b12b3","parameter-mappings":[{"parameter-name":"deflection_configuration","value":{"type":"String","type":"String","mode":"string","value":"5292005253213010000dddeeff7b126c"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_configuration"}},{"parameter-name":"deflection_pattern","value":{"type":"String","type":"String","mode":"string","value":"f063885253213010000dddeeff7b1221"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_pattern"}},{"parameter-name":"activity_table","value":{"type":"String","type":"String","mode":"string","value":"{{vaInputs.record_table}}"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"activity_ids","value":{"type":"String","type":"String","mode":"string","value":"{{vaInputs.record_id}}"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}}],"return-value-mappings":[],"id":"f8e234faa86e42f8be89dc1cbef0fe97","name":"Deflection: Request Complete","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"Deflection","library_topic_id":"7fb4ca055303201033cdddeeff7b12b3","parameter-mappings":[{"parameter-name":"deflection_configuration","value":{"type":"String","type":"String","mode":"string","value":"5292005253213010000dddeeff7b126c"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_configuration"}},{"parameter-name":"deflection_pattern","value":{"type":"String","type":"String","mode":"string","value":"6eb34c5253213010000dddeeff7b12be"},"metadata":{"type":"Reference","list":false,"items":[],"use_items":false,"table":"ssa_deflection_pattern"}},{"parameter-name":"activity_table","value":{"type":"String","type":"String","mode":"string","value":""},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"activity_ids","value":{"type":"String","type":"String","mode":"string","value":""},"metadata":{"type":"String","list":false,"items":[],"use_items":false}}],"return-value-mappings":[],"id":"e347cdd5bef542c68264100be6482c5e","name":"Deflection: Link Provided","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaInputs.catalog_item_id != '-1';\n})()\n"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n\n    vaVars.search = vaInputs.search.toString();\n    vaVars.search_catalogitem = vaInputs.search_catalogitem;\n    vaVars.search_hardware = vaInputs.search_hardware;\n    vaVars.search_software = vaInputs.search_software;\n\n    if (vaInputs.search != ''){\n        vaVars.direct_search = true;\n        return;\n    }\n        \n\n    if (vaContext.getRequesterLang() == 'en') {\n        var gr = new GlideRecord('sc_cat_item');\n        gr.addActiveQuery();\n        gr.addQuery('name', vaInputs.search_catalogitem);\n        gr.query();\n\n        while (gr.next()) {\n            vaVars.catalog_item_id = gr.getValue('sys_id');\n            vaInputs.catalog_item_id = vaVars.catalog_item_id;\n        }\n        \n    } else {\n\n        var gr = new GlideRecord('sys_translated_text');\n        \n        gr.addQuery('value', vaInputs.search_catalogitem);\n        gr.addQuery('tablename', 'sc_cat_item');\n        gr.addQuery('language', vaContext.getRequesterLang())\n        gr.addQuery('fieldname', 'name')\n        gr.query();\n\n        while (gr.next()) {\n            var gr2 = new GlideRecord('sc_cat_item');\n            gr2.addActiveQuery();\n            gr2.addQuery('sys_id', gr.getValue('documentkey'));\n            gr2.query();\n            if (gr2.next()) {\n                vaVars.catalog_item_id = gr.getValue('documentkey');\n                vaInputs.catalog_item_id = vaVars.catalog_item_id;\n            }\n        }\n    }\n\n    if (vaVars.search_catalogitem != null) {\n        if (vaVars.search_hardware == '' &amp;&amp; vaVars.search_software == '')\n            vaVars.hardware_software_entity_mapped = false;\n\n        else\n            vaVars.hardware_software_entity_mapped = true;\n    }\n})()\n","id":"9debb0ff499c4bb8b3251e354342f73d","name":"Set search term","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptOutputPrompt","type":"ScriptOutputPrompt","output_type":"single_part","id":"7c92c870cd51469e90fca12ec8d37e84","name":"Submitted Request Record","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","type":"String","mode":"string","value":"(function execute() {\n    \n    var title = '';\n    var subtitle = '';\n    var fields = [];\n\n    var gr = new GlideRecord(vaVars.record_table);\n    gr.addQuery('sys_id',vaVars.record_id);\n    gr.query();\n    title = gr.getClassDisplayValue();\n    if(gr.next()){\n        subtitle = gr.getValue('task_effective_number').toString();\n        if (gr.isValidField('short_description')) {\n            fields.push({\n                \"fieldLabel\": gr.getElement('short_description').getLabel(),\n                \"fieldValue\": gr.getDisplayValue('short_description').toString()\n            });\n        }\n        if (gr.isValidField('state')) {\n            fields.push({\n                \"fieldLabel\": gr.getElement('state').getLabel(),\n                \"fieldValue\": gr.getDisplayValue('state').toString()\n            });\n        }\n    }\n    \n    var card_data = JSON.stringify({\n            \"title\":title,\n            \"subtitle\":subtitle,\n            \"fields\":fields,\n            \"url\":vaVars.recordLink.toString()\n      });\n    return vaSystem.renderCard(\"Card\", card_data); \n})()\n"},"secure":false},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.catalog_item_id = vaInputs.catalog_item_id;\n    vaVars.is_conversational = new sn_sc.CatalogConversationHelper().hasVASupport(vaVars.catalog_item_id.toString());\n    vaInputs.is_conversational = vaVars.is_conversational;\n})()\n","id":"53f72be6ff084c9680d3b2138867c575","name":"Check if Item is supported by VA?","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"162effbca27b4133a9336b772caee582","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"What are you looking for?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"915219eba21f42498d20c3474b177a1e","name":"Search","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"query","value":"search_catalogitemISEMPTY^search_hardwareISEMPTY^search_softwareISEMPTY^NQvaInputs.search_againISNOTEMPTY"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","type":"InputPrompt","variable_id":"6af63214db3246c396c309c58a4a320f","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"What are you looking for?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":true,"use_confirmation_prompt":false},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"d88a3f469ae84736ba861ce7f996a50c","name":"Search Software","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","type":"InputPrompt","variable_id":"f65feb7997b14843a42703525e1c2736","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"What are you looking for?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":true,"use_confirmation_prompt":false},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"12d727d8a87c46908cb4c7011117518f","name":"Search Hardware","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","type":"InputPrompt","variable_id":"a564f8278c464dd1bd010449c9b1d707","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"What are you looking for?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":true,"use_confirmation_prompt":false},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"c91d24d3c6b1471da067273d8dd724e3","name":"Search CatalogItem","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n  vaVars.search_again = true;\n  vaVars.catalog_item_id = '';\n  vaInputs.catalog_item_id = '';\n})()\n","id":"dd30e1b20e5541758cffdc24cd2fc388","name":"Set variables","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.hardware_software_entity_searched &amp;&amp; !vaVars.direct_search;\n})()\n"},"id":"27beafde91d74f04b8d94cce381dcff9","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    \n    return vaVars.direct_search || vaVars.hardware_software_entity_searched;\n})()\n"},"id":"e3124790181f40fe8a9501228696799f","name":"Yes"}],"id":"725abc90532841a3818eb70d910af5ac","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.hardware_software_entity_searched = true;\n})()\n","id":"c55f01f34a0d495bb527d54f702f01c0","name":"Hardware/Software Search","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaInputs.search_catalogitem = '';\n    vaInputs.search_hardware = '';\n    vaInputs.search_software = '';\n    vaVars.search_catalogitem = '';\n    vaVars.search_hardware = '';\n    vaVars.search_software = '';\n    vaInputs.catalog_item_id = '';\n    vaVars.catalog_item_id = '';\n    vaVars.query_search = true;\n})()\n","id":"b68b2e67b7b343b191ae7407898416ad","name":"Set variables","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Query search?","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return !vaVars.query_search;\n})()\n"},"id":"0116b21cf9954cf6af4e244bdc7cce81","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.query_search;\n})()\n"},"id":"3065e94a87064517a624a855f40ced8c","name":"Yes"}],"id":"6c4c76f18c8f4141ba8651677de31204","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    \n    var catItemObj = new sn_sc.CatItem(vaVars.catalog_item_id);\n    var catItemJson = catItemObj.getItemSummary(false, 'basic');\n    vaVars.image = catItemJson.picture;\n    vaVars.item_title = catItemJson.name;\n\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(vaVars.catalog_item_id);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n})()\n","id":"f648873f313d498991dab2767b614119","name":"Get Catalog item details","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaVars.catalog_item_id != '' || vaInputs.catalog_item_id != '';\n})()\n"}},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!gs.nil(itemJson.description))\n        return gs.getMessage(\"Here are some more details about {0}{1}\", [vaVars.item_title, itemJson.description]);\n})()\n"}],"id":"4327fb2941fb4259bfe814134f7ee2f3","name":"Description","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id  != '-1';\n})()\n"},"secure":false},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    if (vaVars.query_search)\n        return gs.getMessage(\"I'm sorry, I wasn't able to find anything that matches this request, but your questions are helping me learn.\");\n    else\n        return gs.getMessage(\"I'm sorry, I wasn't able to find anything that matches this request.\");\n})()\n"}],"id":"daad8e0c7c9444af84d045f7e79a21e3","name":"Not found","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ImageOutputPrompt","type":"ImageOutputPrompt","url":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return vaVars.baseUri + vaVars.image;\n})()\n"},"alt_text":{"type":"String","type":"String","mode":"string","value":""},"id":"1cc3675407bf453db8cd507cb203c13c","name":"Image","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n\n    return vaVars.catalog_item_id != '' &amp;&amp; vaInputs.search == '' &amp;&amp; vaVars.image_not_shown;\n    \n})()\n"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.catalog_item_id == null &amp;&amp; vaVars.catalog_item_id != null)\n      vaInputs.catalog_item_id = vaVars.catalog_item_id;\n    else if(vaVars.catalog_item_id == null &amp;&amp; vaInputs.catalog_item_id != null)\n     vaVars.catalog_item_id = vaInputs.catalog_item_id;\n})()\n","id":"63973c0b40c14d389fc7d188a8ffc507","name":"Set catalog item variables","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.hardware_software_entity_mapped;\n})()\n"},"id":"eeab2461d22943e686f6c4e427c120dd","name":"Yes"},{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return !vaVars.hardware_software_entity_mapped;\n})()\n"},"id":"27aae7e2174e4a45bc4a0b9120ce42eb","name":"No"}],"id":"561ff6951e2d4076aba1009406503258","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var tableName = vaInputs.record_table.toString();\n    var recordId = vaInputs.record_id.toString();\n\n    vaVars.record_table = tableName;\n    vaVars.record_id = recordId;\n\n    var gr = new GlideRecord(tableName);\n    gr.addQuery('sys_id', recordId);\n    gr.query();\n\n    if (gr.next()) {\n        vaVars.isTaskBasedTable = !!(gr.parent != null &amp;&amp; gr.parent.getTableName() == 'task')\n    }\n\n\n    var pageId = 'form';\n    if (vaVars.isTaskBasedTable)\n        pageId = 'ticket';\n\n    var link = '';\n    var screenId = '';\n    if (vaVars.portalName === 'mesp') {\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\n        if (tableName == 'sc_req_item')\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\n        else if (tableName == 'sc_request')\n            screenId = '276dd3edb79033001befcd58de11a9c7';\n        else if (tableName == 'incident')\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\n        else\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\n\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\n    } else\n        link = vaVars.baseUri + vaVars.portalName + \"?id=\" + pageId + \"&amp;table=\" + tableName + \"&amp;sys_id=\" + recordId;\n\n    vaVars.recordLink = link;\n})()\n","id":"10fd112d8b514d22a7600871b1923344","name":"Process end state details","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Task based table","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.isTaskBasedTable;\n})()\n"},"id":"90923df853f846488708e1c92be7edeb","name":"Task based table"},{"type":"Branch","type":"Branch","label":"Non-Task based table","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.isTaskBasedTable;\n})()\n"},"id":"8049a327d6c5455994abf9621fa34a3c","name":"Non-Task based table"}],"id":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","goal_id":"primary"},{"type":"LinkOutputPrompt","type":"LinkOutputPrompt","header":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Your request has been submitted\", vaContext.getRequesterLang())"},"label":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Click here to view the created record\", vaContext.getRequesterLang())"},"url":{"type":"String","type":"String","mode":"string","value":"{{vaVars.recordLink}}"},"link_type":"single","multi_link_script":"","id":"b663ab74c29c4b6590c5faa34eb315e7","name":"Submitted record link","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ImageOutputPrompt","type":"ImageOutputPrompt","url":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return vaVars.baseUri + vaVars.image.toString();\n})()\n"},"alt_text":{"type":"String","type":"String","mode":"string","value":""},"id":"3eca979d55d842869503620274c44cd7","name":"Image","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.search == '' &amp;&amp; vaVars.catalog_item_id != '' &amp;&amp; vaVars.image_not_shown;\n})()\n"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.image_not_shown=false;\n})()\n","id":"076dd8d68dcc49c884f24cf86cbcf99e","name":"Set variables","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n\n    return vaVars.catalog_item_id != '' &amp;&amp; vaInputs.search == '';\n    \n})()\n"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.image_not_shown=false;\n})()\n","id":"65c8b43f4edc4262bf02ac5b245df225","name":"Set variables","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.search == '' &amp;&amp; vaVars.catalog_item_id != '';\n})()\n"}}],"edges":[{"type":"Edge","source_node_id":"725abc90532841a3818eb70d910af5ac","target_node_id":"561ff6951e2d4076aba1009406503258","branch_id":"27beafde91d74f04b8d94cce381dcff9","id":"c3725918a8594da1a0f10546e49bee65","name":"27beafde91d74f04b8d94cce381dcff9"},{"type":"Edge","source_node_id":"725abc90532841a3818eb70d910af5ac","target_node_id":"b68b2e67b7b343b191ae7407898416ad","branch_id":"e3124790181f40fe8a9501228696799f","id":"cb0f3fdd5e36486a87efeb00aba5479b","name":"e3124790181f40fe8a9501228696799f"},{"type":"Edge","source_node_id":"63973c0b40c14d389fc7d188a8ffc507","target_node_id":"5227c860c92b4eae82d46843d06473d0","id":"89c94231ceca4625918e043a10740432"},{"type":"Edge","source_node_id":"5227c860c92b4eae82d46843d06473d0","target_node_id":"07f218d947e046288a25b452afceed7a","branch_id":"15a649a66f6340a3a5b902563ca4d5b7","id":"1e98ef9fcddf4b6bae42078e10efd3a6","name":"15a649a66f6340a3a5b902563ca4d5b7"},{"type":"Edge","source_node_id":"5227c860c92b4eae82d46843d06473d0","target_node_id":"53f72be6ff084c9680d3b2138867c575","branch_id":"d3d454df4568491595392026e355d7a4","id":"51ce21816a3f4be7a989f6f236d2de61","name":"d3d454df4568491595392026e355d7a4"},{"type":"Edge","source_node_id":"915219eba21f42498d20c3474b177a1e","target_node_id":"9debb0ff499c4bb8b3251e354342f73d","id":"351a47fcd2944f668ecb983d17a71cc9"},{"type":"Edge","source_node_id":"add420b9e74b4a8ead5a4a8e66e16d43","target_node_id":"1cc3675407bf453db8cd507cb203c13c","branch_id":"2e3d948a051b408d843dd9c9e07a004c","id":"4aa771f6fcaf416ab37859d86e97b230","name":"2e3d948a051b408d843dd9c9e07a004c"},{"type":"Edge","source_node_id":"53f72be6ff084c9680d3b2138867c575","target_node_id":"f648873f313d498991dab2767b614119","id":"511ba4d3237f41e981899a531be41b3b"},{"type":"Edge","source_node_id":"f648873f313d498991dab2767b614119","target_node_id":"add420b9e74b4a8ead5a4a8e66e16d43","id":"19f0a04901c64a768218702b8175f7d5"},{"type":"Edge","source_node_id":"5227c860c92b4eae82d46843d06473d0","target_node_id":"daad8e0c7c9444af84d045f7e79a21e3","branch_id":"d597970780bb462cb0186354f5bc7b3a","id":"8073613a9a234a149bc7e29f267b6e2b","name":"d597970780bb462cb0186354f5bc7b3a"},{"type":"Edge","source_node_id":"988ce53412964540b4fc06ed44706c4b","target_node_id":"dc1190333bf444fdaa4c27256fd46aac","id":"51b7069e3c294b56b69b1f357635e4db"},{"type":"Edge","source_node_id":"b68b2e67b7b343b191ae7407898416ad","target_node_id":"915219eba21f42498d20c3474b177a1e","id":"e33a1e25e59f44d09a2efd28cd5b4408"},{"type":"Edge","source_node_id":"c55f01f34a0d495bb527d54f702f01c0","target_node_id":"32e579a972404e2e8b68ec6e5951cbd5","id":"cbf7697332114cbea1bed51caa75bbf2"},{"type":"Edge","source_node_id":"6d6247b7375b4fbb9650a1a71cf954e8","target_node_id":"03db716ef2a14c57ac848341fe5c81c7","id":"cc27b0a669ba453aabaefbdaac24dba6"},{"type":"Edge","source_node_id":"e347cdd5bef542c68264100be6482c5e","target_node_id":"ca244565157e4298ac712f52e089a787","id":"9e62a6997b1a41f8a00a108fcec04252"},{"type":"Edge","source_node_id":"d88a3f469ae84736ba861ce7f996a50c","target_node_id":"915219eba21f42498d20c3474b177a1e","id":"5e9c21a878d04765b0b542065a1b0eee"},{"type":"Edge","source_node_id":"12d727d8a87c46908cb4c7011117518f","target_node_id":"d88a3f469ae84736ba861ce7f996a50c","id":"0372679392574c2fa2aba95ba29069e1"},{"type":"Edge","source_node_id":"9debb0ff499c4bb8b3251e354342f73d","target_node_id":"32e579a972404e2e8b68ec6e5951cbd5","id":"60c2c8d030b542878aaf539309f86812"},{"type":"Edge","source_node_id":"03db716ef2a14c57ac848341fe5c81c7","target_node_id":"ca244565157e4298ac712f52e089a787","branch_id":"2604a816cf244e54a0a6ca0c789c7742","id":"10aba21b4e7e4d48a46e1f4de24ecde6","name":"2604a816cf244e54a0a6ca0c789c7742"},{"type":"Edge","source_node_id":"7c92c870cd51469e90fca12ec8d37e84","target_node_id":"f8e234faa86e42f8be89dc1cbef0fe97","id":"98d8887a3dac43b5becc3a48ef49873e"},{"type":"Edge","source_node_id":"03db716ef2a14c57ac848341fe5c81c7","target_node_id":"229e81ade53643039476a8c81cef1209","branch_id":"40eef31553584531be2795cc263fbe99","id":"04dfadca1ac44269a15b6302ed98168a","name":"40eef31553584531be2795cc263fbe99"},{"type":"Edge","source_node_id":"ca244565157e4298ac712f52e089a787","target_node_id":"078faf38452e4e3ba9a3c447c9caed31","id":"27b96a25494f48f8a82258007f0f28e9"},{"type":"Edge","source_node_id":"07f218d947e046288a25b452afceed7a","target_node_id":"ca244565157e4298ac712f52e089a787","id":"a2c0e5170fb34259a31a4c00eedc4a89"},{"type":"Edge","source_node_id":"078faf38452e4e3ba9a3c447c9caed31","target_node_id":"988ce53412964540b4fc06ed44706c4b","branch_id":"33e1bdc52b494c1e8138d9acfd187218","id":"99e4e14834fb4f1c95ebbd2258c69662","name":"33e1bdc52b494c1e8138d9acfd187218"},{"type":"Edge","source_node_id":"f8e234faa86e42f8be89dc1cbef0fe97","target_node_id":"dc1190333bf444fdaa4c27256fd46aac","id":"dbdea75844f84b2d8702650ac33fe151"},{"type":"Edge","source_node_id":"229e81ade53643039476a8c81cef1209","target_node_id":"e347cdd5bef542c68264100be6482c5e","id":"96be0f1933304271a8d291a79db27a79"},{"type":"Edge","source_node_id":"41c355befd7d498989a56e6ac013a85f","target_node_id":"7c92c870cd51469e90fca12ec8d37e84","id":"a5c3c1b84fe144d2ae06d3ba83efa7fd"},{"type":"Edge","source_node_id":"62e80f5d747742d1a7b6551610b12c78","target_node_id":"c91d24d3c6b1471da067273d8dd724e3","id":"621a542a65d94ae0a966bc1c71626ce7"},{"type":"Edge","source_node_id":"c91d24d3c6b1471da067273d8dd724e3","target_node_id":"12d727d8a87c46908cb4c7011117518f","id":"4425c534384749ada9c31f9c1c92b927"},{"type":"Edge","source_node_id":"66efd2591b864036aba670c32d3f2f8c","target_node_id":"dd30e1b20e5541758cffdc24cd2fc388","id":"1677299a8642474d9a54919330fac76f"},{"type":"Edge","source_node_id":"dd30e1b20e5541758cffdc24cd2fc388","target_node_id":"725abc90532841a3818eb70d910af5ac","id":"b7d638c600e74358862c7e74e89bcd47"},{"type":"Edge","source_node_id":"078faf38452e4e3ba9a3c447c9caed31","target_node_id":"6c4c76f18c8f4141ba8651677de31204","branch_id":"7701dbf8077e404c8145b2c8e383d147","id":"816e7b6c0c834060b8c398f195abcf59","name":"7701dbf8077e404c8145b2c8e383d147"},{"type":"Edge","source_node_id":"6c4c76f18c8f4141ba8651677de31204","target_node_id":"66efd2591b864036aba670c32d3f2f8c","branch_id":"0116b21cf9954cf6af4e244bdc7cce81","id":"6c312d3f47a84da89537eaac5027aee7","name":"0116b21cf9954cf6af4e244bdc7cce81"},{"type":"Edge","source_node_id":"6c4c76f18c8f4141ba8651677de31204","target_node_id":"988ce53412964540b4fc06ed44706c4b","branch_id":"3065e94a87064517a624a855f40ced8c","id":"df96336ae4a34e5288e10d3f5dc37058","name":"3065e94a87064517a624a855f40ced8c"},{"type":"Edge","source_node_id":"4327fb2941fb4259bfe814134f7ee2f3","target_node_id":"229e81ade53643039476a8c81cef1209","id":"cd66cd271a4644aaabe1dcb13055f692"},{"type":"Edge","source_node_id":"daad8e0c7c9444af84d045f7e79a21e3","target_node_id":"ca244565157e4298ac712f52e089a787","id":"4a2a449aaecc41ea92238a97100593f7"},{"type":"Edge","source_node_id":"32e579a972404e2e8b68ec6e5951cbd5","target_node_id":"63973c0b40c14d389fc7d188a8ffc507","id":"aed6aeb8c7fc4f34b7f518726809f546"},{"type":"Edge","source_node_id":"561ff6951e2d4076aba1009406503258","target_node_id":"c55f01f34a0d495bb527d54f702f01c0","branch_id":"eeab2461d22943e686f6c4e427c120dd","id":"101146fcfc6a4e698d6f6eac48691df9","name":"eeab2461d22943e686f6c4e427c120dd"},{"type":"Edge","source_node_id":"561ff6951e2d4076aba1009406503258","target_node_id":"b68b2e67b7b343b191ae7407898416ad","branch_id":"27aae7e2174e4a45bc4a0b9120ce42eb","id":"dcff389ed8944d5bbc1b62cbd52a7e38","name":"27aae7e2174e4a45bc4a0b9120ce42eb"},{"type":"Edge","source_node_id":"03db716ef2a14c57ac848341fe5c81c7","target_node_id":"10fd112d8b514d22a7600871b1923344","branch_id":"059b91cf63f442298b78e2801443f72f","id":"900a3a3be59243f6909ea2225d5ee604","name":"059b91cf63f442298b78e2801443f72f"},{"type":"Edge","source_node_id":"10fd112d8b514d22a7600871b1923344","target_node_id":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","id":"09124c7910894400b6882fd4ca9cf058"},{"type":"Edge","source_node_id":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","target_node_id":"41c355befd7d498989a56e6ac013a85f","branch_id":"90923df853f846488708e1c92be7edeb","id":"2c07ebdabfd54bec986a8b579abba3da","name":"90923df853f846488708e1c92be7edeb"},{"type":"Edge","source_node_id":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","target_node_id":"b663ab74c29c4b6590c5faa34eb315e7","branch_id":"8049a327d6c5455994abf9621fa34a3c","id":"08e535610fc84b16b9647c4ad0c03a0b","name":"8049a327d6c5455994abf9621fa34a3c"},{"type":"Edge","source_node_id":"b663ab74c29c4b6590c5faa34eb315e7","target_node_id":"f8e234faa86e42f8be89dc1cbef0fe97","id":"c4ed59968c0840ddbd11f4f90e90a261"},{"type":"Edge","source_node_id":"add420b9e74b4a8ead5a4a8e66e16d43","target_node_id":"3eca979d55d842869503620274c44cd7","branch_id":"50494135ea9e46b6ac06fc2546d17ee0","id":"872c9d69577343f1b171fe51213cddbd","name":"50494135ea9e46b6ac06fc2546d17ee0"},{"type":"Edge","source_node_id":"1cc3675407bf453db8cd507cb203c13c","target_node_id":"076dd8d68dcc49c884f24cf86cbcf99e","id":"3425b955513f4a6e9702732967f9ee32"},{"type":"Edge","source_node_id":"076dd8d68dcc49c884f24cf86cbcf99e","target_node_id":"4327fb2941fb4259bfe814134f7ee2f3","id":"452058fcc18c40d7868c64d8f1e55268"},{"type":"Edge","source_node_id":"3eca979d55d842869503620274c44cd7","target_node_id":"65c8b43f4edc4262bf02ac5b245df225","id":"9771abff4fc64d21ac949b6645f0acbb"},{"type":"Edge","source_node_id":"65c8b43f4edc4262bf02ac5b245df225","target_node_id":"6d6247b7375b4fbb9650a1a71cf954e8","id":"824189429f7d4aec83451f9e79dd8f22"}],"id":"primary"}],"script_variables":[{"type":"VariableDto","type":"String","name":"LiveAgent_application","value":{"type":"String","type":"String","mode":"string","value":"itsm"},"list":false,"id":"30d84cabae154d388ef654b74a485660","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"baseUri","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri');\n})()\n"},"list":false,"id":"7c60f8c6b69b406aaeec38a71294a6fb","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"portalName","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\n        return 'mesp';\n\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url');\n})()\n"},"list":false,"id":"3b9387cee6d5441aaf8bf0724affb0ea","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"catalog_item_id","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"451319b7beef48e383a697ba39039f32","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"is_conversational","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"10dcd4183c9d4e82a2a5a84eb85bed41","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_catalogitem","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"07cb4d63e09b414ba98ce8cc49ea954a","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_hardware","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"62245a2396eb46c7b2df9a6070a67ab2","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_software","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"607467ec6e2a4c7d9eea935664da9a97","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_again","value":{"type":"String","type":"String","mode":"string","value":"false"},"list":false,"id":"bd6076fa6abf430590e976917945b74b","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"hardware_software_entity_searched","value":{"type":"String","type":"String","mode":"string","value":"false"},"list":false,"id":"43650b4fd56d4782a427de57aeadaca9","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"query_search","value":{"type":"String","type":"String","mode":"string","value":"false"},"list":false,"id":"ac1de26ade9144c6b35b43c5db0645f6","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"image","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"d18bab34c84146e4acc0049de8dd04bf","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"item_title","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"676c9a1d4c314e6fae8a1116c7da70a1","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"itemJSON","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"08e32496c50d495e8de3b46a75f57fba","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"fc606249c28949fca8740301f3317d79","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"direct_search","value":{"type":"String","type":"String","mode":"string","value":"false"},"list":false,"id":"0619f0ebea3e4fa98a696e1d3f1b5897","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"hardware_software_entity_mapped","value":{"type":"String","type":"String","mode":"string","value":"false"},"list":false,"id":"09809ddc190047f79694d5a46382ffd5","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_table","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"61af0a6e288a4a51a29e9fe54b7a3281","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_id","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"80c4a15840964de3ac5c0dcaafce9c68","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"recordLink","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"946275714f3c4a149797113fa7bb8c30","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"isTaskBasedTable","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"27578c09e9e74b2ba82c6af2b6db9e64","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"image_not_shown","value":{"type":"String","type":"String","mode":"string","value":"true"},"list":false,"id":"590b3d6ad0cf47a0aa2b65873c561411","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"VariableDto","type":"String","name":"search_catalogitem","list":false,"id":"a564f8278c464dd1bd010449c9b1d707","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","type":"Reference","table":"sys_user","id":"dec9ffac02f940f7adf8493ab467e5b4","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[{"name":"Yes","element":"0"},{"name":"No","element":"1"}],"id":"45e06ec7056d406d866244385bee84b8","name":"search_again","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"VariableDto","type":"String","name":"search_hardware","list":false,"id":"f65feb7997b14843a42703525e1c2736","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_software","list":false,"id":"6af63214db3246c396c309c58a4a320f","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search","list":false,"id":"162effbca27b4133a9336b772caee582","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"catalog_item_id","list":false,"id":"4d7b18d3763a474cba7c7f86bbdd3eb9","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"item_type","list":false,"id":"4f975357f57342b7be0c04e9d4caa4c0","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"is_conversational","list":false,"id":"a1070b69eba440958a51d57d92b8da35","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_id","list":false,"id":"b067b62af9b645f0ab5c1d09e6a35ab4","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_table","list":false,"id":"80d1b5422a414dc09213a803878c63c5","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"variables","list":false,"id":"7e04baa7e2d343eebc804d7ddf319058","formatType":"text","metadata":{"libraryMappingType":"output"},"secure":false,"sensitive":false}],"applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"global","domain":"global","topic_type":"STANDARD","channels":[],"id":"e57f160597b9e5104313b066f053aff8","name":"Submit a request.","key_phrases":["Submit a request.","Submit a request (Deprecated)","Submit a request","request","buy","item","catalog","purchase","order","computer","phone","need","require","order software","install software","request software"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[{"name":null,"visible":false,"sysId":"3efd22da0b203300a1b16c2367673a10"}],"triggerable_by_notification":false,"library":false,"readOnly":true,"nluMapping":"[]"}</design_definition>
        <design_topic_id>e57f160597b9e5104313b066f053aff8</design_topic_id>
        <graph>{"graph_api_version":"1.0.41","variables":{"30d84cabae154d388ef654b74a485660":{"id":"30d84cabae154d388ef654b74a485660","name":"LiveAgent_application","value":{"mode":"simple","value":"itsm"},"varType":"script","label":"LiveAgent_application","category":"vaVars"},"7c60f8c6b69b406aaeec38a71294a6fb":{"id":"7c60f8c6b69b406aaeec38a71294a6fb","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri');\n})()\n"},"name":"baseUri","label":"baseUri","varType":"script","category":"vaVars"},"3b9387cee6d5441aaf8bf0724affb0ea":{"id":"3b9387cee6d5441aaf8bf0724affb0ea","value":{"mode":"script","value":"(function execute() {\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\n        return 'mesp';\n\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url');\n})()\n"},"name":"portalName","label":"portalName","varType":"script","category":"vaVars"},"a564f8278c464dd1bd010449c9b1d707":{"id":"a564f8278c464dd1bd010449c9b1d707","name":"search_catalogitem","label":"Search CatalogItem","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYyNDI5NTQxMTYxMSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"dec9ffac02f940f7adf8493ab467e5b4":{"category":"vaInputs","id":"dec9ffac02f940f7adf8493ab467e5b4","label":"User","name":"user","table":"sys_user","varType":"reference"},"45e06ec7056d406d866244385bee84b8":{"id":"45e06ec7056d406d866244385bee84b8","name":"search_again","label":"Search Again","varType":"choice","choices":[{"label":"Yes","value":"0"},{"label":"No","value":"1","checked":true}],"category":"vaInputs"},"f65feb7997b14843a42703525e1c2736":{"id":"f65feb7997b14843a42703525e1c2736","name":"search_hardware","label":"Search Hardware","varType":"string","secure":false,"category":"vaInputs","encryptionHashFunction":"SHA-256","encryptionSalt":{"value":"MTYzMTY5MjI2Mzk0MCBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"}},"451319b7beef48e383a697ba39039f32":{"id":"451319b7beef48e383a697ba39039f32","value":{"mode":"simple","value":""},"name":"catalog_item_id","label":"catalog_item_id","varType":"script","category":"vaVars"},"10dcd4183c9d4e82a2a5a84eb85bed41":{"id":"10dcd4183c9d4e82a2a5a84eb85bed41","value":{"value":"","mode":"simple"},"name":"is_conversational","label":"is_conversational","varType":"script","category":"vaVars"},"6af63214db3246c396c309c58a4a320f":{"id":"6af63214db3246c396c309c58a4a320f","name":"search_software","label":"Search Software","varType":"string","secure":false,"category":"vaInputs","encryptionHashFunction":"SHA-256","encryptionSalt":{"value":"MTYzNzA2MzQ1Mjg3MSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"}},"162effbca27b4133a9336b772caee582":{"id":"162effbca27b4133a9336b772caee582","name":"search","label":"Search","varType":"string","secure":false,"category":"vaInputs","encryptionHashFunction":"SHA-256","encryptionSalt":{"value":"MTYzNzA2MzQ2NjM1NyBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"}},"07cb4d63e09b414ba98ce8cc49ea954a":{"id":"07cb4d63e09b414ba98ce8cc49ea954a","value":{"value":"","mode":"simple"},"name":"search_catalogitem","label":"search_catalogitem","varType":"script","category":"vaVars"},"62245a2396eb46c7b2df9a6070a67ab2":{"id":"62245a2396eb46c7b2df9a6070a67ab2","value":{"value":"","mode":"simple"},"name":"search_hardware","label":"search_hardware","varType":"script","category":"vaVars"},"607467ec6e2a4c7d9eea935664da9a97":{"id":"607467ec6e2a4c7d9eea935664da9a97","value":{"value":"","mode":"simple"},"name":"search_software","label":"search_software","varType":"script","category":"vaVars"},"bd6076fa6abf430590e976917945b74b":{"id":"bd6076fa6abf430590e976917945b74b","value":{"mode":"simple","value":"false"},"name":"search_again","label":"search_again","varType":"script","category":"vaVars"},"43650b4fd56d4782a427de57aeadaca9":{"id":"43650b4fd56d4782a427de57aeadaca9","value":{"mode":"simple","value":"false"},"name":"hardware_software_entity_searched","label":"hardware_software_entity_searched","varType":"script","category":"vaVars"},"ac1de26ade9144c6b35b43c5db0645f6":{"id":"ac1de26ade9144c6b35b43c5db0645f6","value":{"mode":"simple","value":"false"},"name":"query_search","label":"query_search","varType":"script","category":"vaVars"},"d18bab34c84146e4acc0049de8dd04bf":{"id":"d18bab34c84146e4acc0049de8dd04bf","value":{"value":"","mode":"simple"},"name":"image","label":"image","varType":"script","category":"vaVars"},"676c9a1d4c314e6fae8a1116c7da70a1":{"id":"676c9a1d4c314e6fae8a1116c7da70a1","value":{"value":"","mode":"simple"},"name":"item_title","label":"item_title","varType":"script","category":"vaVars"},"08e32496c50d495e8de3b46a75f57fba":{"id":"08e32496c50d495e8de3b46a75f57fba","value":{"value":"","mode":"simple"},"name":"itemJSON","label":"itemJSON","varType":"script","category":"vaVars"},"fc606249c28949fca8740301f3317d79":{"id":"fc606249c28949fca8740301f3317d79","value":{"value":"","mode":"simple"},"name":"search","label":"search","varType":"script","category":"vaVars"},"0619f0ebea3e4fa98a696e1d3f1b5897":{"id":"0619f0ebea3e4fa98a696e1d3f1b5897","value":{"mode":"simple","value":"false"},"name":"direct_search","label":"direct_search","varType":"script","category":"vaVars"},"4d7b18d3763a474cba7c7f86bbdd3eb9":{"id":"4d7b18d3763a474cba7c7f86bbdd3eb9","name":"catalog_item_id","label":"Catalog_item_id","defaultValue":"catalog_item_id","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":true},"4f975357f57342b7be0c04e9d4caa4c0":{"id":"4f975357f57342b7be0c04e9d4caa4c0","name":"item_type","label":"Item_type","defaultValue":"item_type","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":false},"a1070b69eba440958a51d57d92b8da35":{"id":"a1070b69eba440958a51d57d92b8da35","name":"is_conversational","label":"Is_conversational","defaultValue":"is_conversational","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":true},"09809ddc190047f79694d5a46382ffd5":{"id":"09809ddc190047f79694d5a46382ffd5","value":{"mode":"simple","value":"false"},"name":"hardware_software_entity_mapped","label":"hardware_software_entity_mapped","varType":"script","category":"vaVars"},"61af0a6e288a4a51a29e9fe54b7a3281":{"id":"61af0a6e288a4a51a29e9fe54b7a3281","value":{"value":"","mode":"simple"},"name":"record_table","label":"record_table","varType":"script","category":"vaVars"},"80c4a15840964de3ac5c0dcaafce9c68":{"id":"80c4a15840964de3ac5c0dcaafce9c68","value":{"value":"","mode":"simple"},"name":"record_id","label":"record_id","varType":"script","category":"vaVars"},"946275714f3c4a149797113fa7bb8c30":{"id":"946275714f3c4a149797113fa7bb8c30","value":{"value":"","mode":"simple"},"name":"recordLink","label":"recordLink","varType":"script","category":"vaVars"},"27578c09e9e74b2ba82c6af2b6db9e64":{"id":"27578c09e9e74b2ba82c6af2b6db9e64","value":{"mode":"simple","value":""},"name":"isTaskBasedTable","label":"isTaskBasedTable","varType":"script","category":"vaVars"},"590b3d6ad0cf47a0aa2b65873c561411":{"id":"590b3d6ad0cf47a0aa2b65873c561411","value":{"mode":"simple","value":"true"},"name":"image_not_shown","label":"image_not_shown","varType":"script","category":"vaVars"},"b067b62af9b645f0ab5c1d09e6a35ab4":{"id":"b067b62af9b645f0ab5c1d09e6a35ab4","name":"record_id","label":"Record_id","defaultValue":"record_id","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":true},"80d1b5422a414dc09213a803878c63c5":{"id":"80d1b5422a414dc09213a803878c63c5","name":"record_table","label":"Record_table","defaultValue":"record_table","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":true},"7e04baa7e2d343eebc804d7ddf319058":{"id":"7e04baa7e2d343eebc804d7ddf319058","name":"variables","label":"Variables","defaultValue":"variables","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"output"},"preventDisable":false}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"62e80f5d747742d1a7b6551610b12c78":{"id":"62e80f5d747742d1a7b6551610b12c78","stepType":"Start","name":"Start","greetingResponse":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""}},"dc1190333bf444fdaa4c27256fd46aac":{"id":"dc1190333bf444fdaa4c27256fd46aac","stepType":"TerminateGoal","name":"End","confirmationMessage":{"mode":"simple","value":""},"applicability":{"mode":"query","value":""}},"32e579a972404e2e8b68ec6e5951cbd5":{"id":"32e579a972404e2e8b68ec6e5951cbd5","stepType":"ReusableTopic","name":"Search Catalog Item","fields":[],"reusableTopicChoice":"Search Catalog Item","reusableTopicId":"ccaacd71c3a3330012d1758a7ff57ecd","inputs":{"catalogs":{"value":"(function execute() {\n    function getCatalogM2M(portalId) {\n        var gr = new GlideRecord('m2m_sp_portal_catalog');\n        if (gr.isValid()) {\n            gr.addActiveQuery();\n            gr.addQuery('sp_portal', portalId);\n            gr.addQuery('sc_catalog.active', true);\n            gr.orderBy('order');\n            gr.orderBy('sc_catalog.active');\n        }\n        else {\n            gr = new GlideRecord('sp_portal');\n            gr.addQuery('sys_id', portalId);\n        }\n        gr.setWorkflow(false)\n        gr.query();\n        return gr;\n    }\n    var suffix = vaVars.portalName;\n    if (suffix) {\n        var catalogs = \"\";\n        var gr = new GlideRecord('sp_portal');\n        gr.addQuery('url_suffix', suffix);\n        gr.setWorkflow(false)\n        gr.query();\n        gr.next();\n        var portalId = gr.getUniqueValue();\n        vaVars.portalId = portalId;\n        var m2mGR = getCatalogM2M(portalId);\n        if (m2mGR.getRowCount() &gt; 0) {\n            m2mGR.next();\n            catalogs += m2mGR.getValue('sc_catalog');\n            while (m2mGR.next()) {\n                catalogs += ',';\n                catalogs += m2mGR.getValue('sc_catalog')\n\n            }\n        }\n        return catalogs;\n    }\n    return '';\n})()\n","mode":"script","type":"String"},"query_term":{"value":"(function execute() {\n    if (vaVars.search_catalogitem != '' &amp;&amp; !vaVars.search_again)\n        return vaVars.search_catalogitem\n\n    if (vaVars.search_hardware != '')\n        return vaVars.search_hardware\n    else if (vaVars.search_software != '')\n        return vaVars.search_software\n    else if (vaInputs.search != '')\n        return vaInputs.search\n\n})()\n","mode":"script","type":"String"},"result_limit":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"5"},{"text":""}]}],"mode":"simple","type":"String"}},"outputs":[{"id":"4d7b18d3763a474cba7c7f86bbdd3eb9","value":"catalog_item_id","mapping":"catalog_item_id","preventDisable":true},{"id":"4f975357f57342b7be0c04e9d4caa4c0","value":"item_type","mapping":"item_type","preventDisable":false},{"id":"a1070b69eba440958a51d57d92b8da35","value":"is_conversational","mapping":"is_conversational","preventDisable":true}],"variableIds":["4d7b18d3763a474cba7c7f86bbdd3eb9","4f975357f57342b7be0c04e9d4caa4c0","a1070b69eba440958a51d57d92b8da35"],"outdatedNote":false,"applicability":{"mode":"script","value":"(function execute() {\n    return vaVars.search_again || !vaVars.catalog_item_id;\n})()\n"},"loading":false},"5227c860c92b4eae82d46843d06473d0":{"id":"5227c860c92b4eae82d46843d06473d0","stepType":"Decision","name":"Decision"},"66efd2591b864036aba670c32d3f2f8c":{"id":"66efd2591b864036aba670c32d3f2f8c","stepType":"TextOutput","name":"Try Again","value":[{"value":[{"type":"paragraph","children":[{"text":"OK, let's try again."}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"},"secure":false},"add420b9e74b4a8ead5a4a8e66e16d43":{"id":"add420b9e74b4a8ead5a4a8e66e16d43","stepType":"Decision","name":"Decision"},"229e81ade53643039476a8c81cef1209":{"id":"229e81ade53643039476a8c81cef1209","stepType":"LinkOutput","name":"Link Output","url":{"value":"(function execute() {\n    var item = new sn_sc.CatItem(vaInputs.catalog_item_id);\n\n    if (item &amp;&amp; item.getRecordClass() === \"sc_cat_item_guide\")\n        return vaVars.baseUri + vaVars.portalName + '?id=sc_cat_item_guide&amp;sys_id=' + vaInputs.catalog_item_id + '&amp;referrer=va';\n    \n    return vaVars.baseUri + vaVars.portalName + '?id=sc_cat_item&amp;sys_id=' + vaInputs.catalog_item_id + '&amp;referrer=va';\n})()","mode":"script"},"label":{"value":"(function execute() {\n    var item = new sn_sc.CatItem(vaInputs.catalog_item_id);\n    if (item) {\n        var catItemJson = item.read({\n            'name' : ''\n        }, false);\n        return catItemJson.name || '';\n    }\n    return '';\n})()\n","mode":"script"},"header":{"value":[{"type":"paragraph","children":[{"text":"Use the link below to submit your request:"}]}],"mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaInputs.catalog_item_id != '-1';\n})()\n"},"linkType":"single","introMsg":{"value":"","mode":"simple"},"listOfLinks":""},"6d6247b7375b4fbb9650a1a71cf954e8":{"id":"6d6247b7375b4fbb9650a1a71cf954e8","stepType":"ReusableTopic","name":"Request Catalog Item","fields":[],"reusableTopicChoice":"Request Catalog Item","reusableTopicId":"a39acd71c3a3330012d1758a7ff57eb6","inputs":{"catalog_item_id":{"value":"(function execute() {\n\n    if (vaVars.catalog_item_id == '') {\n        return vaInputs.catalog_item_id.toString()\n    }\n\n    else\n        return vaVars.catalog_item_id.toString();\n\n})()\n","mode":"script","type":"String"},"execute_contextual_search":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"false"},{"text":""}]}],"mode":"simple","type":"String"},"confirm_catalog_item":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"true"},{"text":""}]}],"mode":"simple","type":"String"},"show_end_state_card":{"value":"false","mode":"simple","type":"True/False"}},"outputs":[{"id":"b067b62af9b645f0ab5c1d09e6a35ab4","value":"record_id","mapping":"record_id","preventDisable":true},{"id":"80d1b5422a414dc09213a803878c63c5","value":"record_table","mapping":"record_table","preventDisable":true},{"id":"7e04baa7e2d343eebc804d7ddf319058","value":"variables","mapping":"variables","preventDisable":false}],"variableIds":["b067b62af9b645f0ab5c1d09e6a35ab4","80d1b5422a414dc09213a803878c63c5","7e04baa7e2d343eebc804d7ddf319058"],"outdatedNote":false,"applicability":{"value":"","mode":"query"},"loading":false},"03db716ef2a14c57ac848341fe5c81c7":{"id":"03db716ef2a14c57ac848341fe5c81c7","stepType":"Decision","name":"Decision"},"41c355befd7d498989a56e6ac013a85f":{"id":"41c355befd7d498989a56e6ac013a85f","stepType":"TextOutput","name":"Request Complete Message","value":[{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Your request has been submitted. Here are the details:"},{"text":""}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"},"secure":false},"078faf38452e4e3ba9a3c447c9caed31":{"id":"078faf38452e4e3ba9a3c447c9caed31","stepType":"Decision","name":"Decision"},"ca244565157e4298ac712f52e089a787":{"stepType":"ChoicePrompt","name":"Search Again","prompt":{"value":[{"type":"paragraph","children":[{"text":"Would you like to keep searching?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n       return !vaVars.query_search;\n})()\n"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"45e06ec7056d406d866244385bee84b8","id":"ca244565157e4298ac712f52e089a787","withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":"","label":""},"skippable":{"value":"","mode":"query"},"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"hasCardHeader":false},"07f218d947e046288a25b452afceed7a":{"id":"07f218d947e046288a25b452afceed7a","stepType":"TextOutput","name":"Item not found","value":[{"value":[{"type":"paragraph","children":[{"text":""},{"text":"I couldn't find any item that matches your search query"},{"text":""}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"},"secure":false},"988ce53412964540b4fc06ed44706c4b":{"id":"988ce53412964540b4fc06ed44706c4b","stepType":"Component","name":"No Deflection","fields":[],"reusableTopicId":"7fb4ca055303201033cdddeeff7b12b3","reusableTopicChoice":"Deflection","sourceType":"TOPIC_BLOCK","loading":false,"applicability":{"value":"","mode":"query"},"inputs":{"deflection_configuration":{"value":"5292005253213010000dddeeff7b126c","mode":"string","type":"Reference","table":"ssa_deflection_configuration"},"deflection_pattern":{"value":"9ee3409253213010000dddeeff7b123b","mode":"string","type":"Reference","table":"ssa_deflection_pattern"},"activity_table":{"value":"","mode":"simple","type":"String"},"activity_ids":{"value":"","mode":"simple","type":"String"}},"outputs":[],"outdatedNote":false,"variableIds":[]},"f8e234faa86e42f8be89dc1cbef0fe97":{"id":"f8e234faa86e42f8be89dc1cbef0fe97","stepType":"Component","name":"Deflection: Request Complete","fields":[],"reusableTopicId":"7fb4ca055303201033cdddeeff7b12b3","reusableTopicChoice":"Deflection","sourceType":"TOPIC_BLOCK","loading":false,"applicability":{"value":"","mode":"query"},"inputs":{"deflection_configuration":{"value":"5292005253213010000dddeeff7b126c","mode":"string","type":"Reference","table":"ssa_deflection_configuration"},"deflection_pattern":{"value":"f063885253213010000dddeeff7b1221","mode":"string","type":"Reference","table":"ssa_deflection_pattern"},"activity_table":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaInputs.record_table}}","displayValue":"Input Variables➛Record_table"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"},"activity_ids":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaInputs.record_id}}","displayValue":"Input Variables➛Record_id"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"}},"outputs":[],"outdatedNote":false,"variableIds":[]},"e347cdd5bef542c68264100be6482c5e":{"id":"e347cdd5bef542c68264100be6482c5e","stepType":"Component","name":"Deflection: Link Provided","fields":[],"reusableTopicId":"7fb4ca055303201033cdddeeff7b12b3","reusableTopicChoice":"Deflection","sourceType":"TOPIC_BLOCK","loading":false,"applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaInputs.catalog_item_id != '-1';\n})()\n"},"inputs":{"deflection_configuration":{"value":"5292005253213010000dddeeff7b126c","mode":"string","type":"Reference","table":"ssa_deflection_configuration"},"deflection_pattern":{"value":"6eb34c5253213010000dddeeff7b12be","mode":"string","type":"Reference","table":"ssa_deflection_pattern"},"activity_table":{"value":"","mode":"simple","type":"String"},"activity_ids":{"value":"","mode":"simple","type":"String"}},"outputs":[],"outdatedNote":false,"variableIds":[]},"9debb0ff499c4bb8b3251e354342f73d":{"id":"9debb0ff499c4bb8b3251e354342f73d","name":"Set search term","script":"(function execute() {\n\n    vaVars.search = vaInputs.search.toString();\n    vaVars.search_catalogitem = vaInputs.search_catalogitem;\n    vaVars.search_hardware = vaInputs.search_hardware;\n    vaVars.search_software = vaInputs.search_software;\n\n    if (vaInputs.search != ''){\n        vaVars.direct_search = true;\n        return;\n    }\n        \n\n    if (vaContext.getRequesterLang() == 'en') {\n        var gr = new GlideRecord('sc_cat_item');\n        gr.addActiveQuery();\n        gr.addQuery('name', vaInputs.search_catalogitem);\n        gr.query();\n\n        while (gr.next()) {\n            vaVars.catalog_item_id = gr.getValue('sys_id');\n            vaInputs.catalog_item_id = vaVars.catalog_item_id;\n        }\n        \n    } else {\n\n        var gr = new GlideRecord('sys_translated_text');\n        \n        gr.addQuery('value', vaInputs.search_catalogitem);\n        gr.addQuery('tablename', 'sc_cat_item');\n        gr.addQuery('language', vaContext.getRequesterLang())\n        gr.addQuery('fieldname', 'name')\n        gr.query();\n\n        while (gr.next()) {\n            var gr2 = new GlideRecord('sc_cat_item');\n            gr2.addActiveQuery();\n            gr2.addQuery('sys_id', gr.getValue('documentkey'));\n            gr2.query();\n            if (gr2.next()) {\n                vaVars.catalog_item_id = gr.getValue('documentkey');\n                vaInputs.catalog_item_id = vaVars.catalog_item_id;\n            }\n        }\n    }\n\n    if (vaVars.search_catalogitem != null) {\n        if (vaVars.search_hardware == '' &amp;&amp; vaVars.search_software == '')\n            vaVars.hardware_software_entity_mapped = false;\n\n        else\n            vaVars.hardware_software_entity_mapped = true;\n    }\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"7c92c870cd51469e90fca12ec8d37e84":{"id":"7c92c870cd51469e90fca12ec8d37e84","stepType":"ScriptOutput","name":"Submitted Request Record","output_type":"single_part","script":"(function execute() {\n    \n    var title = '';\n    var subtitle = '';\n    var fields = [];\n\n    var gr = new GlideRecord(vaVars.record_table);\n    gr.addQuery('sys_id',vaVars.record_id);\n    gr.query();\n    title = gr.getClassDisplayValue();\n    if(gr.next()){\n        subtitle = gr.getValue('task_effective_number').toString();\n        if (gr.isValidField('short_description')) {\n            fields.push({\n                \"fieldLabel\": gr.getElement('short_description').getLabel(),\n                \"fieldValue\": gr.getDisplayValue('short_description').toString()\n            });\n        }\n        if (gr.isValidField('state')) {\n            fields.push({\n                \"fieldLabel\": gr.getElement('state').getLabel(),\n                \"fieldValue\": gr.getDisplayValue('state').toString()\n            });\n        }\n    }\n    \n    var card_data = JSON.stringify({\n            \"title\":title,\n            \"subtitle\":subtitle,\n            \"fields\":fields,\n            \"url\":vaVars.recordLink.toString()\n      });\n    return vaSystem.renderCard(\"Card\", card_data); \n})()\n","applicability":{"value":"","mode":"query"}},"53f72be6ff084c9680d3b2138867c575":{"id":"53f72be6ff084c9680d3b2138867c575","name":"Check if Item is supported by VA?","script":"(function execute() {\n    vaVars.catalog_item_id = vaInputs.catalog_item_id;\n    vaVars.is_conversational = new sn_sc.CatalogConversationHelper().hasVASupport(vaVars.catalog_item_id.toString());\n    vaInputs.is_conversational = vaVars.is_conversational;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"915219eba21f42498d20c3474b177a1e":{"id":"915219eba21f42498d20c3474b177a1e","stepType":"Prompt","name":"Search","prompt":{"value":[{"type":"paragraph","children":[{"text":"What are you looking for?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"vaInputs.search_catalogitemISEMPTY^vaInputs.search_hardwareISEMPTY^vaInputs.search_softwareISEMPTY^NQvaInputs.search_againISNOTEMPTY","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"162effbca27b4133a9336b772caee582","inputType":{"format":"Text","script":""}},"d88a3f469ae84736ba861ce7f996a50c":{"id":"d88a3f469ae84736ba861ce7f996a50c","stepType":"Prompt","name":"Search Software","prompt":{"value":[{"type":"paragraph","children":[{"text":"What are you looking for?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"skippable":{"mode":"query","value":""},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":true,"skipIfFulfilled":true,"variableId":"6af63214db3246c396c309c58a4a320f","inputType":{"format":"Text","script":""}},"12d727d8a87c46908cb4c7011117518f":{"id":"12d727d8a87c46908cb4c7011117518f","stepType":"Prompt","name":"Search Hardware","prompt":{"value":[{"type":"paragraph","children":[{"text":"What are you looking for?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"skippable":{"mode":"query","value":""},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":true,"skipIfFulfilled":true,"variableId":"f65feb7997b14843a42703525e1c2736","inputType":{"format":"Text","script":""}},"c91d24d3c6b1471da067273d8dd724e3":{"id":"c91d24d3c6b1471da067273d8dd724e3","stepType":"Prompt","name":"Search CatalogItem","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"What are you looking for?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return false;\n})()\n"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":"","label":""},"variableId":"a564f8278c464dd1bd010449c9b1d707","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"dd30e1b20e5541758cffdc24cd2fc388":{"id":"dd30e1b20e5541758cffdc24cd2fc388","name":"Set variables","script":"(function execute() {\n  vaVars.search_again = true;\n  vaVars.catalog_item_id = '';\n  vaInputs.catalog_item_id = '';\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"725abc90532841a3818eb70d910af5ac":{"id":"725abc90532841a3818eb70d910af5ac","stepType":"Decision","name":"Decision"},"c55f01f34a0d495bb527d54f702f01c0":{"id":"c55f01f34a0d495bb527d54f702f01c0","name":"Hardware/Software Search","script":"(function execute() {\n    vaVars.hardware_software_entity_searched = true;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"b68b2e67b7b343b191ae7407898416ad":{"id":"b68b2e67b7b343b191ae7407898416ad","name":"Set variables","script":"(function execute() {\n    vaInputs.search_catalogitem = '';\n    vaInputs.search_hardware = '';\n    vaInputs.search_software = '';\n    vaVars.search_catalogitem = '';\n    vaVars.search_hardware = '';\n    vaVars.search_software = '';\n    vaInputs.catalog_item_id = '';\n    vaVars.catalog_item_id = '';\n    vaVars.query_search = true;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"6c4c76f18c8f4141ba8651677de31204":{"id":"6c4c76f18c8f4141ba8651677de31204","stepType":"Decision","name":"Query search?"},"f648873f313d498991dab2767b614119":{"id":"f648873f313d498991dab2767b614119","name":"Get Catalog item details","script":"(function execute() {\n    \n    var catItemObj = new sn_sc.CatItem(vaVars.catalog_item_id);\n    var catItemJson = catItemObj.getItemSummary(false, 'basic');\n    vaVars.image = catItemJson.picture;\n    vaVars.item_title = catItemJson.name;\n\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(vaVars.catalog_item_id);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n})()\n","stepType":"ScriptAction","applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n    return vaVars.catalog_item_id != '' || vaInputs.catalog_item_id != '';\n})()\n"}},"4327fb2941fb4259bfe814134f7ee2f3":{"id":"4327fb2941fb4259bfe814134f7ee2f3","stepType":"TextOutput","name":"Description","secure":false,"value":[{"value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!gs.nil(itemJson.description))\n        return gs.getMessage(\"Here are some more details about {0}{1}\", [vaVars.item_title, itemJson.description]);\n})()\n","mode":"script"}],"applicability":{"mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id  != '-1';\n})()\n"}},"daad8e0c7c9444af84d045f7e79a21e3":{"id":"daad8e0c7c9444af84d045f7e79a21e3","stepType":"TextOutput","name":"Not found","secure":false,"value":[{"value":"(function execute() {\n    if (vaVars.query_search)\n        return gs.getMessage(\"I'm sorry, I wasn't able to find anything that matches this request, but your questions are helping me learn.\");\n    else\n        return gs.getMessage(\"I'm sorry, I wasn't able to find anything that matches this request.\");\n})()\n","mode":"script"}],"applicability":{"mode":"query","value":""}},"1cc3675407bf453db8cd507cb203c13c":{"id":"1cc3675407bf453db8cd507cb203c13c","stepType":"ImageOutput","name":"Image","url":{"value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return vaVars.baseUri + vaVars.image;\n})()\n","mode":"script"},"altText":{"value":"","mode":"simple"},"variableId":"","applicability":{"mode":"script","value":"(function execute() {\n\n    return vaVars.catalog_item_id != '' &amp;&amp; vaInputs.search == '' &amp;&amp; vaVars.image_not_shown;\n    \n})()\n"}},"63973c0b40c14d389fc7d188a8ffc507":{"id":"63973c0b40c14d389fc7d188a8ffc507","name":"Set catalog item variables","script":"(function execute() {\n    if(vaInputs.catalog_item_id == null &amp;&amp; vaVars.catalog_item_id != null)\n      vaInputs.catalog_item_id = vaVars.catalog_item_id;\n    else if(vaVars.catalog_item_id == null &amp;&amp; vaInputs.catalog_item_id != null)\n     vaVars.catalog_item_id = vaInputs.catalog_item_id;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"561ff6951e2d4076aba1009406503258":{"id":"561ff6951e2d4076aba1009406503258","stepType":"Decision","name":"Decision"},"10fd112d8b514d22a7600871b1923344":{"id":"10fd112d8b514d22a7600871b1923344","name":"Process end state details","script":"(function execute() {\n    var tableName = vaInputs.record_table.toString();\n    var recordId = vaInputs.record_id.toString();\n\n    vaVars.record_table = tableName;\n    vaVars.record_id = recordId;\n\n    var gr = new GlideRecord(tableName);\n    gr.addQuery('sys_id', recordId);\n    gr.query();\n\n    if (gr.next()) {\n        vaVars.isTaskBasedTable = !!(gr.parent != null &amp;&amp; gr.parent.getTableName() == 'task')\n    }\n\n\n    var pageId = 'form';\n    if (vaVars.isTaskBasedTable)\n        pageId = 'ticket';\n\n    var link = '';\n    var screenId = '';\n    if (vaVars.portalName === 'mesp') {\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\n        if (tableName == 'sc_req_item')\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\n        else if (tableName == 'sc_request')\n            screenId = '276dd3edb79033001befcd58de11a9c7';\n        else if (tableName == 'incident')\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\n        else\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\n\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\n    } else\n        link = vaVars.baseUri + vaVars.portalName + \"?id=\" + pageId + \"&amp;table=\" + tableName + \"&amp;sys_id=\" + recordId;\n\n    vaVars.recordLink = link;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"3d5a9d1dc0d34c06ac9f5d9f5b37510f":{"id":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","stepType":"Decision","name":"Decision"},"b663ab74c29c4b6590c5faa34eb315e7":{"id":"b663ab74c29c4b6590c5faa34eb315e7","stepType":"LinkOutput","name":"Submitted record link","url":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.recordLink}}","displayValue":"Script Variables➛recordLink"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple"},"label":{"value":[{"type":"paragraph","children":[{"text":"Click here to view the created record"}]}],"mode":"simple"},"header":{"value":[{"type":"paragraph","children":[{"text":"Your request has been submitted"}]}],"mode":"simple"},"applicability":{"value":"","mode":"query"},"linkType":"single","introMsg":{"value":"","mode":"simple"},"listOfLinks":""},"3eca979d55d842869503620274c44cd7":{"id":"3eca979d55d842869503620274c44cd7","stepType":"ImageOutput","name":"Image","url":{"value":"(function execute() {\n    return vaVars.baseUri + vaVars.image.toString();\n})()\n","mode":"script"},"altText":{"value":"","mode":"simple"},"variableId":"","applicability":{"mode":"script","value":"(function execute() {\n    return vaInputs.search == '' &amp;&amp; vaVars.catalog_item_id != '' &amp;&amp; vaVars.image_not_shown;\n})()\n"}},"076dd8d68dcc49c884f24cf86cbcf99e":{"id":"076dd8d68dcc49c884f24cf86cbcf99e","name":"Set variables","script":"(function execute() {\n    vaVars.image_not_shown=false;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"script","value":"(function execute() {\n\n    return vaVars.catalog_item_id != '' &amp;&amp; vaInputs.search == '';\n    \n})()\n"}},"65c8b43f4edc4262bf02ac5b245df225":{"id":"65c8b43f4edc4262bf02ac5b245df225","name":"Set variables","script":"(function execute() {\n    vaVars.image_not_shown=false;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"script","value":"(function execute() {\n    return vaInputs.search == '' &amp;&amp; vaVars.catalog_item_id != '';\n})()\n"}}},"edges":[{"id":"c3725918a8594da1a0f10546e49bee65","edgeType":"Branch","source":"725abc90532841a3818eb70d910af5ac","target":"561ff6951e2d4076aba1009406503258","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.hardware_software_entity_searched &amp;&amp; !vaVars.direct_search;\n})()\n"},"label":"No"},{"id":"cb0f3fdd5e36486a87efeb00aba5479b","edgeType":"Branch","source":"725abc90532841a3818eb70d910af5ac","target":"b68b2e67b7b343b191ae7407898416ad","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    \n    return vaVars.direct_search || vaVars.hardware_software_entity_searched;\n})()\n"},"label":"Yes"},{"id":"89c94231ceca4625918e043a10740432","edgeType":"Edge","source":"63973c0b40c14d389fc7d188a8ffc507","target":"5227c860c92b4eae82d46843d06473d0","sourcePort":"","targetPort":""},{"id":"1e98ef9fcddf4b6bae42078e10efd3a6","edgeType":"Branch","source":"5227c860c92b4eae82d46843d06473d0","target":"07f218d947e046288a25b452afceed7a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id == '' || vaVars.catalog_item_id == null;\n})()\n"},"label":"Didn't recieve an itemID"},{"id":"51ce21816a3f4be7a989f6f236d2de61","edgeType":"Branch","source":"5227c860c92b4eae82d46843d06473d0","target":"53f72be6ff084c9680d3b2138867c575","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   \n   return (vaVars.catalog_item_id != null &amp;&amp; vaInputs.catalog_item_id != \"-1\");\n   \n})()\n"},"label":"Recieved an ItemID"},{"id":"351a47fcd2944f668ecb983d17a71cc9","edgeType":"Edge","source":"915219eba21f42498d20c3474b177a1e","target":"9debb0ff499c4bb8b3251e354342f73d","sourcePort":"","targetPort":""},{"id":"4aa771f6fcaf416ab37859d86e97b230","edgeType":"Branch","source":"add420b9e74b4a8ead5a4a8e66e16d43","target":"1cc3675407bf453db8cd507cb203c13c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   \n        return (!vaVars.is_conversational || !vaInputs.is_conversational);\n\n})()\n"},"label":"Not Supported"},{"id":"511ba4d3237f41e981899a531be41b3b","edgeType":"Edge","source":"53f72be6ff084c9680d3b2138867c575","target":"f648873f313d498991dab2767b614119","sourcePort":"","targetPort":""},{"id":"19f0a04901c64a768218702b8175f7d5","edgeType":"Edge","source":"f648873f313d498991dab2767b614119","target":"add420b9e74b4a8ead5a4a8e66e16d43","sourcePort":"","targetPort":""},{"id":"8073613a9a234a149bc7e29f267b6e2b","edgeType":"Branch","source":"5227c860c92b4eae82d46843d06473d0","target":"daad8e0c7c9444af84d045f7e79a21e3","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.catalog_item_id == \"-1\";\n})()\n"},"label":"itemIid is -1"},{"id":"51b7069e3c294b56b69b1f357635e4db","edgeType":"Edge","source":"988ce53412964540b4fc06ed44706c4b","target":"dc1190333bf444fdaa4c27256fd46aac","sourcePort":"","targetPort":""},{"id":"e33a1e25e59f44d09a2efd28cd5b4408","edgeType":"Edge","source":"b68b2e67b7b343b191ae7407898416ad","target":"915219eba21f42498d20c3474b177a1e","sourcePort":"","targetPort":""},{"id":"cbf7697332114cbea1bed51caa75bbf2","edgeType":"Edge","source":"c55f01f34a0d495bb527d54f702f01c0","target":"32e579a972404e2e8b68ec6e5951cbd5","sourcePort":"","targetPort":""},{"id":"cc27b0a669ba453aabaefbdaac24dba6","edgeType":"Edge","source":"6d6247b7375b4fbb9650a1a71cf954e8","target":"03db716ef2a14c57ac848341fe5c81c7","sourcePort":"","targetPort":""},{"id":"9e62a6997b1a41f8a00a108fcec04252","edgeType":"Edge","source":"e347cdd5bef542c68264100be6482c5e","target":"ca244565157e4298ac712f52e089a787","sourcePort":"","targetPort":""},{"id":"5e9c21a878d04765b0b542065a1b0eee","edgeType":"Edge","source":"d88a3f469ae84736ba861ce7f996a50c","target":"915219eba21f42498d20c3474b177a1e","sourcePort":"","targetPort":""},{"id":"0372679392574c2fa2aba95ba29069e1","edgeType":"Edge","source":"12d727d8a87c46908cb4c7011117518f","target":"d88a3f469ae84736ba861ce7f996a50c","sourcePort":"","targetPort":""},{"id":"60c2c8d030b542878aaf539309f86812","edgeType":"Edge","source":"9debb0ff499c4bb8b3251e354342f73d","target":"32e579a972404e2e8b68ec6e5951cbd5","sourcePort":"","targetPort":""},{"id":"10aba21b4e7e4d48a46e1f4de24ecde6","edgeType":"Branch","source":"03db716ef2a14c57ac848341fe5c81c7","target":"ca244565157e4298ac712f52e089a787","sourcePort":"","targetPort":"","expression":{"value":"record_idEMPTYSTRING","mode":"query"},"label":"Catalog Request Not Complete"},{"id":"98d8887a3dac43b5becc3a48ef49873e","edgeType":"Edge","source":"7c92c870cd51469e90fca12ec8d37e84","target":"f8e234faa86e42f8be89dc1cbef0fe97","sourcePort":"","targetPort":""},{"id":"04dfadca1ac44269a15b6302ed98168a","edgeType":"Branch","source":"03db716ef2a14c57ac848341fe5c81c7","target":"229e81ade53643039476a8c81cef1209","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !!vaInputs.record_id.getValue() &amp;&amp; vaInputs.record_id.getValue() == '-1';\n})()\n"},"label":"Item has no VA Support"},{"id":"27b96a25494f48f8a82258007f0f28e9","edgeType":"Edge","source":"ca244565157e4298ac712f52e089a787","target":"078faf38452e4e3ba9a3c447c9caed31","sourcePort":"","targetPort":""},{"id":"a2c0e5170fb34259a31a4c00eedc4a89","edgeType":"Edge","source":"07f218d947e046288a25b452afceed7a","target":"ca244565157e4298ac712f52e089a787","sourcePort":"","targetPort":""},{"id":"99e4e14834fb4f1c95ebbd2258c69662","edgeType":"Branch","source":"078faf38452e4e3ba9a3c447c9caed31","target":"988ce53412964540b4fc06ed44706c4b","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.search_again=1","mode":"query"},"label":"No"},{"id":"dbdea75844f84b2d8702650ac33fe151","edgeType":"Edge","source":"f8e234faa86e42f8be89dc1cbef0fe97","target":"dc1190333bf444fdaa4c27256fd46aac","sourcePort":"","targetPort":""},{"id":"96be0f1933304271a8d291a79db27a79","edgeType":"Edge","source":"229e81ade53643039476a8c81cef1209","target":"e347cdd5bef542c68264100be6482c5e","sourcePort":"","targetPort":""},{"id":"a5c3c1b84fe144d2ae06d3ba83efa7fd","edgeType":"Edge","source":"41c355befd7d498989a56e6ac013a85f","target":"7c92c870cd51469e90fca12ec8d37e84","sourcePort":"","targetPort":""},{"id":"621a542a65d94ae0a966bc1c71626ce7","edgeType":"Edge","source":"62e80f5d747742d1a7b6551610b12c78","target":"c91d24d3c6b1471da067273d8dd724e3","sourcePort":"","targetPort":""},{"id":"4425c534384749ada9c31f9c1c92b927","edgeType":"Edge","source":"c91d24d3c6b1471da067273d8dd724e3","target":"12d727d8a87c46908cb4c7011117518f","sourcePort":"","targetPort":""},{"id":"1677299a8642474d9a54919330fac76f","edgeType":"Edge","source":"66efd2591b864036aba670c32d3f2f8c","target":"dd30e1b20e5541758cffdc24cd2fc388","sourcePort":"","targetPort":""},{"id":"b7d638c600e74358862c7e74e89bcd47","edgeType":"Edge","source":"dd30e1b20e5541758cffdc24cd2fc388","target":"725abc90532841a3818eb70d910af5ac","sourcePort":"","targetPort":""},{"id":"816e7b6c0c834060b8c398f195abcf59","edgeType":"Branch","source":"078faf38452e4e3ba9a3c447c9caed31","target":"6c4c76f18c8f4141ba8651677de31204","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.search_again=0","mode":"query"},"label":"Yes"},{"id":"6c312d3f47a84da89537eaac5027aee7","edgeType":"Branch","source":"6c4c76f18c8f4141ba8651677de31204","target":"66efd2591b864036aba670c32d3f2f8c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return !vaVars.query_search;\n})()\n"},"label":"No"},{"id":"df96336ae4a34e5288e10d3f5dc37058","edgeType":"Branch","source":"6c4c76f18c8f4141ba8651677de31204","target":"988ce53412964540b4fc06ed44706c4b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.query_search;\n})()\n"},"label":"Yes"},{"id":"cd66cd271a4644aaabe1dcb13055f692","edgeType":"Edge","source":"4327fb2941fb4259bfe814134f7ee2f3","target":"229e81ade53643039476a8c81cef1209","sourcePort":"","targetPort":""},{"id":"4a2a449aaecc41ea92238a97100593f7","edgeType":"Edge","source":"daad8e0c7c9444af84d045f7e79a21e3","target":"ca244565157e4298ac712f52e089a787","sourcePort":"","targetPort":""},{"id":"aed6aeb8c7fc4f34b7f518726809f546","edgeType":"Edge","source":"32e579a972404e2e8b68ec6e5951cbd5","target":"63973c0b40c14d389fc7d188a8ffc507","sourcePort":"","targetPort":""},{"id":"101146fcfc6a4e698d6f6eac48691df9","edgeType":"Branch","source":"561ff6951e2d4076aba1009406503258","target":"c55f01f34a0d495bb527d54f702f01c0","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.hardware_software_entity_mapped;\n})()\n"},"label":"Yes"},{"id":"dcff389ed8944d5bbc1b62cbd52a7e38","edgeType":"Branch","source":"561ff6951e2d4076aba1009406503258","target":"b68b2e67b7b343b191ae7407898416ad","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return !vaVars.hardware_software_entity_mapped;\n})()\n"},"label":"No"},{"id":"900a3a3be59243f6909ea2225d5ee604","edgeType":"Branch","source":"03db716ef2a14c57ac848341fe5c81c7","target":"10fd112d8b514d22a7600871b1923344","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !!vaInputs.record_id.getValue() &amp;&amp; vaInputs.record_id.getValue() != '-1';\n})()\n"},"label":"Catalog Request Complete"},{"id":"09124c7910894400b6882fd4ca9cf058","edgeType":"Edge","source":"10fd112d8b514d22a7600871b1923344","target":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","sourcePort":"","targetPort":""},{"id":"2c07ebdabfd54bec986a8b579abba3da","edgeType":"Branch","source":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","target":"41c355befd7d498989a56e6ac013a85f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.isTaskBasedTable;\n})()\n"},"label":"Task based table"},{"id":"08e535610fc84b16b9647c4ad0c03a0b","edgeType":"Branch","source":"3d5a9d1dc0d34c06ac9f5d9f5b37510f","target":"b663ab74c29c4b6590c5faa34eb315e7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.isTaskBasedTable;\n})()\n"},"label":"Non-Task based table"},{"id":"c4ed59968c0840ddbd11f4f90e90a261","edgeType":"Edge","source":"b663ab74c29c4b6590c5faa34eb315e7","target":"f8e234faa86e42f8be89dc1cbef0fe97","sourcePort":"","targetPort":""},{"id":"872c9d69577343f1b171fe51213cddbd","edgeType":"Branch","source":"add420b9e74b4a8ead5a4a8e66e16d43","target":"3eca979d55d842869503620274c44cd7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return (vaVars.is_conversational || vaInputs.is_conversational);\n})()\n"},"label":"Is Supported"},{"id":"3425b955513f4a6e9702732967f9ee32","edgeType":"Edge","source":"1cc3675407bf453db8cd507cb203c13c","target":"076dd8d68dcc49c884f24cf86cbcf99e","sourcePort":"","targetPort":""},{"id":"452058fcc18c40d7868c64d8f1e55268","edgeType":"Edge","source":"076dd8d68dcc49c884f24cf86cbcf99e","target":"4327fb2941fb4259bfe814134f7ee2f3","sourcePort":"","targetPort":""},{"id":"9771abff4fc64d21ac949b6645f0acbb","edgeType":"Edge","source":"3eca979d55d842869503620274c44cd7","target":"65c8b43f4edc4262bf02ac5b245df225","sourcePort":"","targetPort":""},{"id":"824189429f7d4aec83451f9e79dd8f22","edgeType":"Edge","source":"65c8b43f4edc4262bf02ac5b245df225","target":"6d6247b7375b4fbb9650a1a71cf954e8","sourcePort":"","targetPort":""}]}}}</graph>
        <name>Submit a request.</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-03-24 02:20:33</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>d8d2e64997b9e5104313b066f053af78</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_design_topic_d8d2e64997b9e5104313b066f053af78</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-03-24 02:20:40</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
